<%- include("../partials/header") %>


<div class="row">
  <div class="col-md-3">
    <p class="lead">YelpCamp</p>
    <div class="list-group">
      <div class="list-group-item active">Info1</div>
      <div class="list-group-item">Info 2</div>
      <div class="list-group-item">Info 3</div>
    </div>
  </div>
  <div class="col-md-9">
    <div class="thumbnail">
      <img src="<%=campground.image%>" class="img-responsive" alt="" />
      <div class="caption-full">
        <h4 class="pull-right">$<%=campground.price%>/night</h4>
        <h4><a href=""><%=campground.name%></a></h4>
        <p><%=campground.description%></p>
        <h4><em>Submitted by <%=campground.author.username%></em></h4>
        <!-- currentUser가 없으면 에러발생 먼저 currentUser 유무 체크 -->
        <%if(currentUser && campground.author.id.equals(currentUser._id)){%>
        <a class="btn btn-warning" href="/campgrounds/<%=campground._id%>/edit">Edit</a>
        <form class="delete-form" action="/campgrounds/<%=campground._id%>?_method=DELETE" method="POST">
          <button class="btn btn-danger">Delete</button>
        </form>
        <%}%>
        </div>
      </div>
      <div class="well">
        <%if(currentUser){%>
        <div class="text-right">
          <a class="btn btn-success" href="/campgrounds/<%=campground._id%>/comments/new">Add New Comment</a>
        </div>
        <%} %>

        <hr />
        <% campground.comments.forEach(function (comment) { %>
        <div class="row">
          <div class="col-md-12">
            <strong><%=comment.author.username%></strong>
            <%if(currentUser && comment.author.id.equals(currentUser._id)){%>
            <a href="/campgrounds/<%=campground._id%>/comments/<%=comment._id%>/edit "
              class="btn btn-xs btn-warning">Edit</a>
            <form class="delete-form" action="/campgrounds/<%=campground._id%>/comments/<%=comment._id%>?_method=DELETE"
              method="POST">
              <button class="btn btn-xs btn-danger">Delete</button>
            </form>
            <%}%>
            <span class="pull-right">10 days ago</span>
            <p>
              <%=comment.text%>
            </p>
          </div>
        </div>
        <% }); %>
      </div>
    </div>

    <%- include("../partials/footer") %>
  </div>